# 形式語言與編譯器設計實例

這個專案包含三個 Python 程式，展示了形式語言理論和編譯器設計中的關鍵概念，包括上下文無關文法、遞迴下降解析器和語法生成器。

## 專案檔案

### 1. anbn.py - 上下文無關文法實現

這個程式實現了經典的上下文無關文法 `S → aSb | ab`，用於生成 `a^n b^n` 形式的字串。

#### 功能特點
- 使用遞迴方法模擬文法規則
- 生成符合 `a^n b^n` 模式的字串
- 展示了文法推導的遞迴過程

#### 使用範例
```python
print(f"n=1: {S(1)}")  # 輸出: "ab"
print(f"n=3: {S(3)}")  # 輸出: "aaabbb"
print(f"n=5: {S(5)}")  # 輸出: "aaaaabbbbb"
```

#### 文法規則
```
S → aSb | ab
```

### 2. expParser.py - 數學表達式解析器

這是一個簡單的數學表達式解析器，使用遞迴下降解析技術來分析和計算數學表達式。

#### 功能特點
- 詞法分析器（Tokenizer）用於標記化輸入
- 語法分析器（Parser）用於解析表達式結構
- 支援基本運算符：`+`, `-`, `*`, `/`
- 支援變數替換和括號運算
- 錯誤處理（語法錯誤、未定義變數、除零錯誤）

#### 支援的文法
```
E → E op E | (E) | id | num
op → + | - | * | /
```

#### 使用範例
```python
variables_map = {'x': 10, 'y': 5, 'z': 2}
parser = Parser("x + y * z", variables_map)
result = parser.parse()  # 結果: 20
```

#### 注意事項
- 目前實現使用從左到右的計算順序，不遵循標準運算符優先級
- 需要改進以處理運算符優先級和結合性

### 3. exp.py - 隨機表達式生成器

這個程式使用遞迴方法隨機生成合法的數學表達式，可用於測試解析器或其他語言處理工具。

#### 功能特點
- 可控制生成表達式的複雜度（通過最大深度參數）
- 隨機生成數字、變數、二元運算和括號表達式
- 支援的運算符：`+`, `-`, `*`, `/`
- 支援的變數：`x`, `y`, `z`, `a`, `b`

#### 使用範例
```python
# 生成複雜度為3的表達式
expr = generate_expression(current_depth=1, max_depth=3)
# 可能輸出: "((x + 5) * (y - 3)) / 2"
```

#### 生成規則
- 終結符：數字(1-100)、變數、運算符
- 非終結符：二元表達式、括號表達式
- 終止條件：達到最大深度或隨機概率

## 技術概念

### 上下文無關文法（Context-Free Grammar）
- 用形式化規則描述語言結構
- 包含終結符、非終結符、產生式規則和開始符號
- 用於程式語言語法、自然語言處理等領域

### 遞迴下降解析（Recursive Descent Parsing）
- 自上而下的解析技術
- 每個非終結符對應一個解析函數
- 簡單直觀，易於實現和除錯

### 語法生成（Grammar Generation）
- 從文法規則自動生成符合語法的字串
- 用於測試、模糊測試和語言學習

## 執行需求

- Python 3.6+
- 無需額外部件庫

## 應用場景

1. **編譯器設計教學** - 展示編譯器前端的基本組件
2. **語言處理研究** - 提供文法實現和解析的參考實現
3. **測試資料生成** - 為數學計算器或表達式求值器生成測試案例
4. **計算理論學習** - 理解形式語言和自動機理論的實際應用

## 擴展建議

- 為解析器添加運算符優先級處理
- 實現更多文法規則和語言結構
- 添加語法樹視覺化功能
- 支援更多資料類型和函數呼叫

## 作者與許可

此專案為教育目的而創建，可用於學習和研究形式語言與編譯器設計的相關概念。

## 執行範例

### anbn.py 執行結果
```
n=1: ab
n=3: aaabbb
n=5: aaaaabbbbb
```

### expParser.py 執行結果
```
--- 簡易解析器範例 (從左到右計算，忽略標準優先級) ---
表達式: 10 + 2 * 3     | 計算結果 (L-to-R): 36.0
表達式: 5 - 2 + 1      | 計算結果 (L-to-R): 4.0
表達式: x + y / z      | 計算結果 (L-to-R): 7.5
表達式: y * (3 + z)    | 計算結果 (L-to-R): 25.0

--- 錯誤範例 ---
錯誤測試: (1 + 2  | 錯誤: Missing closing parenthesis ')'
```

### exp.py 執行結果
```
--- 隨機生成複雜度 <= 3 的運算式 ---
運算式 1: (58 / 76) - 69
運算式 2: 37 / 60
運算式 3: 48
運算式 4: y - 79
運算式 5: 51 * x

--- 增加複雜度 (Max Depth = 5) ---
運算式 1: ((b + 45) + 36) / (a - (y * 60))
運算式 2: 53 / (z - 18)
運算式 3: (x + (66 * 53)) * 89
```

## 如何執行

1. 克隆或下載此專案
2. 確保已安裝 Python 3.6+
3. 直接執行各個檔案：
```bash
python anbn.py
python expParser.py
python exp.py
```